build:
  dependencies:
    before:
      - cp config/parameters.scrutinizer.yml config/parameters.yml
  environment:
    postgresql: '9.5'
  nodes:
    analysis:
      project_setup:
        override: true
      tests:
        override:
          - php-scrutinizer-run --enable-security-analysis
          -
            command: 'vendor/bin/phpunit --coverage-clover=build/coverage/coverage-clover-file'
            coverage:
                file: 'build/coverage/coverage-clover-file'
                format: 'clover'

filter:
  excluded_paths:
    - 'build/*'
    - 'vendor/*'

checks:
  php: true
coding_style:
  php:
    spaces:
      around_operators:
        additive: false